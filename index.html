<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Will You Be My Valentine? ‚ù§Ô∏è</title>
  <style>
    :root{
      --pink:#ff4d6d;
      --pink-dark:#d63384;
      --rose:#ff6b9f;
      --bg1:#ffe0ea;
      --bg2:#ffd6f3;
      --bg3:#ffe7f0;
      --text:#2b2b2b;
      --glass-bg: rgba(255,255,255,0.78);
      --glass-border: rgba(255,255,255,0.55);
      --shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
      display:grid;
      place-items:center;
      overflow:hidden;
      background: radial-gradient(1200px 600px at 50% 100%, #fff8fc 0%, #ffeef6 40%, #ffe5f0 70%, #ffd9ea 100%);
    }

    /* Initial main card */
    .container{
      text-align:center; padding:28px; width:min(92vw,680px);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      position: relative;
      z-index: 2;
    }

    h1{
      color: var(--pink-dark);
      font-size: clamp(1.9rem, 4.8vw, 3rem);
      margin: 0 0 18px;
      line-height:1.14;
    }

    .buttons{
      display:flex; gap:20px; justify-content:center; align-items:center; position:relative; height:64px;
    }

    button{
      padding:14px 26px;
      font-size:1.05rem; font-weight:700;
      border:none; border-radius:14px; cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background-color .15s ease;
      box-shadow: 0 8px 18px rgba(0,0,0,0.08);
      will-change: transform, left, top;
    }
    #yesBtn{ background: linear-gradient(135deg, var(--pink), #ff7aa0); color:#fff; }
    #yesBtn:hover{ transform: translateY(-2px); }
    #noBtn{ background:#6c757d; color:#fff; position:absolute; left:130px; top:0; }

    /* Animated ambient gradient behind everything */
    .bg-gradient{
      position:fixed; inset:-20vmax; z-index:0; filter: blur(60px) saturate(110%);
      background: conic-gradient(from 180deg at 50% 50%, var(--bg1), var(--bg2), var(--bg3), var(--bg1));
      animation: swirl 22s linear infinite;
      opacity: 0.55;
      pointer-events:none;
    }
    @keyframes swirl{
      0%{ transform: rotate(0deg) scale(1.05); }
      100%{ transform: rotate(360deg) scale(1.05); }
    }

    /* Soft vignette to frame the scene */
    .vignette{
      position:fixed; inset:0; pointer-events:none; z-index:1;
      background: radial-gradient(120% 120% at 50% 50%, rgba(255,255,255,0) 60%, rgba(0,0,0,0.12) 100%);
    }

    /* Success view */
    #success-wrap{
      display:none; position:fixed; inset:0; z-index:3; display:flex; align-items:center; justify-content:center; padding:20px;
    }
    #success-card{
      width:min(92vw, 760px);
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.75));
      border: 1px solid var(--glass-border);
      border-radius: 26px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.18);
      padding: 28px 26px 26px;
      text-align:center;
      backdrop-filter: blur(10px) saturate(120%);
      position:relative;
      overflow:hidden;
    }

    /* Light shine sweep */
    .shine{
      position:absolute; inset:-20% -40%;
      background: conic-gradient(from 180deg at 50% 50%, rgba(255,255,255,0.0) 0deg, rgba(255,255,255,0.25) 40deg, rgba(255,255,255,0.0) 80deg);
      animation: sweep 6.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sweep{
      0%{ transform: rotate(0deg) translateX(0); }
      50%{ transform: rotate(20deg) translateX(6%); }
      100%{ transform: rotate(0deg) translateX(0); }
    }

    .success-title{
      font-size: clamp(2rem, 5vw, 3rem);
      color: #f01757;
      margin: 8px 0 12px;
      text-shadow: 0 6px 18px rgba(240,23,87,0.25);
      letter-spacing: .2px;
    }

    .typewriter{
      font-size: clamp(1.05rem, 2.6vw, 1.25rem);
      color:#7a2b45;
      min-height: 2.8em;
      margin: 0 auto 16px;
      max-width: 46ch;
      white-space: pre-wrap;
    }

    .success-sub{
      color:#7c3a59;
      font-weight:600; opacity:.9;
      margin: 4px 0 16px;
    }

    .cta-row{
      display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:12px;
    }
    .cta{
      padding:12px 18px; border-radius:12px; border:1px solid rgba(0,0,0,0.06);
      font-weight:700; cursor:pointer;
      background:#fff; color:#ae2c57;
      transition: transform .15s ease, box-shadow .15s ease, background-color .15s ease;
      box-shadow: 0 10px 22px rgba(255,77,109,0.12);
    }
    .cta.primary{ background: linear-gradient(135deg, #ff6a8b, #ff91b0); color:white; border:none; }
    .cta:hover{ transform: translateY(-2px); }

    /* Floating hearts + sparkles */
    .float-emoji{
      position:fixed; bottom:-40px; font-size:18px; opacity:.55;
      animation: rise linear forwards; pointer-events:none; user-select:none;
      filter: drop-shadow(0 2px 3px rgba(0,0,0,0.15));
      z-index: 2;
    }
    @keyframes rise{
      to{ transform: translateY(-110vh) translateX(var(--drift, 0)); opacity:0; }
    }

    /* Confetti canvas */
    #confetti{ position:fixed; inset:0; width:100vw; height:100vh; pointer-events:none; display:none; z-index:4; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
    }
  </style>
</head>
<body>
  <!-- Ambient background layers -->
  <div class="bg-gradient" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <!-- Main question -->
  <div class="container" id="main-content" role="dialog" aria-labelledby="title" aria-live="polite">
    <h1 id="title">Will you be my Valentine? üåπ</h1>
    <div class="buttons" id="buttons-zone" aria-label="Answer options">
      <button id="yesBtn" type="button">Yes</button>
      <button id="noBtn" type="button" aria-label="No (this one runs away)">No</button>
    </div>
  </div>

  <!-- Success screen -->
  <div id="success-wrap" aria-live="assertive">
    <div id="success-card" role="status">
      <div class="shine" aria-hidden="true"></div>
      <h2 class="success-title">Yay! I knew you'd say yes! ü•∞‚ù§Ô∏è</h2>
      <div id="typewriter" class="typewriter"></div>
      <div class="success-sub">You + Me ‚Ä¢ Valentine‚Äôs Day ‚Ä¢ It‚Äôs a date üíå</div>
      <div class="cta-row">
        <button class="cta primary" id="setDateBtn">Set a date üìÖ</button>
        <button class="cta" id="replayBtn">Replay ‚ú®</button>
      </div>
    </div>
  </div>

  <!-- Confetti -->
  <canvas id="confetti" aria-hidden="true"></canvas>

  <script>
    (function(){
      const yesBtn = document.getElementById('yesBtn');
      const noBtn = document.getElementById('noBtn');
      const main = document.getElementById('main-content');
      const zone = document.getElementById('buttons-zone');
      const successWrap = document.getElementById('success-wrap');
      const typewriterEl = document.getElementById('typewriter');
      const setDateBtn = document.getElementById('setDateBtn');
      const replayBtn = document.getElementById('replayBtn');

      const confettiCanvas = document.getElementById('confetti');
      const ctx = confettiCanvas.getContext('2d');

      // YES button growth with cap
      let yesScale = 1.2;
      const YES_MAX = 2.2;

      // Positioning helpers
      function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

      function positionNoNearYes(){
        const zoneRect = zone.getBoundingClientRect();
        const yesRect = yesBtn.getBoundingClientRect();
        const noRect = noBtn.getBoundingClientRect();
        const margin = 16;
        let x = yesRect.right - zoneRect.left + margin;
        let y = yesRect.top - zoneRect.top;
        const maxX = zoneRect.width - noRect.width - 4;
        const maxY = zoneRect.height - noRect.height - 4;
        x = clamp(x, 4, maxX);
        y = clamp(y, 0, maxY);
        noBtn.style.left = x + 'px';
        noBtn.style.top = y + 'px';
      }
      positionNoNearYes();
      window.addEventListener('resize', positionNoNearYes);

      // Track pointer for evasive behavior
      let lastPointer = null;
      window.addEventListener('mousemove', e => lastPointer = {x:e.clientX, y:e.clientY}, {passive:true});
      window.addEventListener('touchmove', e => { const t=e.touches[0]; if(t) lastPointer={x:t.clientX,y:t.clientY}; }, {passive:true});

      function moveNoButton(){
        const btnRect = noBtn.getBoundingClientRect();
        const margin = 12;
        const maxX = window.innerWidth - btnRect.width - margin;
        const maxY = window.innerHeight - btnRect.height - margin;

        let x = Math.random()*maxX;
        let y = Math.random()*maxY;

        if (lastPointer){
          const dx = lastPointer.x - btnRect.left;
          const dy = lastPointer.y - btnRect.top;
          const d = Math.hypot(dx, dy)||1;
          const push = 160;
          x = clamp(btnRect.left - (dx/d)*push + (Math.random()*60-30), margin, maxX);
          y = clamp(btnRect.top  - (dy/d)*push + (Math.random()*60-30), margin, maxY);
        }

        noBtn.style.left = x+'px';
        noBtn.style.top = y+'px';

        yesScale = Math.min(YES_MAX, yesScale + 0.18);
        yesBtn.style.transform = `scale(${yesScale})`;
      }

      noBtn.addEventListener('mouseenter', moveNoButton);
      noBtn.addEventListener('focus', moveNoButton);
      noBtn.addEventListener('pointerdown', moveNoButton);
      noBtn.addEventListener('touchstart', e => { e.preventDefault(); moveNoButton(); }, {passive:false});

      yesBtn.addEventListener('click', celebrate);
      yesBtn.addEventListener('keydown', e => { if(e.key==='Enter'||e.key===' ') celebrate(); });

      // Celebration ----------------------------------------------------------------
      function celebrate(){
        main.style.display = 'none';
        successWrap.style.display = 'flex';

        // Background stays pretty (no harsh white), launch confetti + hearts + typewriter
        resizeCanvas();
        launchConfetti(1600);
        spawnEmojis(22);
        typeText(typewriterEl, "Forever starts now. Let‚Äôs make the cutest Valentine‚Äôs date‚Äîdessert first? üç∞üíó", 26);
      }

      // Typewriter effect
      function typeText(el, text, speed=25){
        el.textContent = '';
        let i=0;
        const step = () => {
          el.textContent = text.slice(0, i++);
          if (i <= text.length) requestAnimationFrame(step);
        };
        // make it human-like by pacing with time
        (function paced(){
          if (i<=text.length){
            el.textContent = text.slice(0, i++);
            setTimeout(paced, speed + Math.random()*50);
          }
        })();
      }

      // Floating hearts & sparkles
      function spawnEmojis(n=14){
        const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduced) return;

        const pool = ['üíñ','üíò','‚ú®','üíû','üåπ','üíï'];
        for(let i=0;i<n;i++){
          const e = document.createElement('span');
          e.className='float-emoji';
          e.textContent = pool[Math.floor(Math.random()*pool.length)];
          e.style.left = (Math.random()*100)+'vw';
          e.style.fontSize = (16 + Math.random()*18)+'px';
          e.style.animationDuration = (5000 + Math.random()*5500)+'ms';
          e.style.setProperty('--drift', (Math.random()*90-45)+'px');
          document.body.appendChild(e);
          const total = parseFloat(e.style.animationDuration);
          setTimeout(()=> e.remove(), total + 120);
        }
      }

      // Confetti (lightweight)
      function resizeCanvas(){
        confettiCanvas.width = window.innerWidth;
        confettiCanvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resizeCanvas);

      function launchConfetti(duration=1300){
        const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduced) return;

        confettiCanvas.style.display = 'block';
        const colors=['#ff4d6d','#ffd166','#7bdff2','#b2f7ef','#cdb4db','#ffc8dd','#a2d2ff','#ffe066'];
        const pieces=[];
        const count = Math.round((window.innerWidth*window.innerHeight)/30000) + 90;

        for(let i=0;i<count;i++){
          pieces.push({
            x: Math.random()*confettiCanvas.width,
            y: -10 - Math.random()*80,
            w: 6 + Math.random()*7,
            h: 10 + Math.random()*12,
            color: colors[i%colors.length],
            vy: 2 + Math.random()*4,
            vx: -1.8 + Math.random()*3.6,
            rot: Math.random()*Math.PI,
            vr: -0.25 + Math.random()*0.5,
            alpha: 0.85 - Math.random()*0.25
          });
        }

        let start = performance.now();
        function tick(now){
          const elapsed = now - start;
          ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);

          pieces.forEach(p=>{
            p.x += p.vx; p.y += p.vy; p.rot += p.vr;
            ctx.save();
            ctx.globalAlpha = p.alpha;
            ctx.translate(p.x, p.y);
            ctx.rotate(p.rot);
            ctx.fillStyle = p.color;
            ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
            ctx.restore();
          });

          if (elapsed < duration){
            requestAnimationFrame(tick);
          } else {
            confettiCanvas.style.display = 'none';
            ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
          }
        }
        requestAnimationFrame(tick);
      }

      // CTA actions
      setDateBtn.addEventListener('click', () => {
        // Opens a calendar link or reminder‚Äîcustomize if you want a specific date.
        const url = 'https://calendar.google.com/';
        window.open(url, '_blank', 'noopener');
      });

      replayBtn.addEventListener('click', () => {
        // Replay the celebration without re-asking
        launchConfetti(1400);
        spawnEmojis(18);
        typeText(typewriterEl, "Counting down to our sweetest date. I‚Äôll bring the flowers‚Äîyou bring the smile üå∑üòä", 26);
      });

    })();
  </script>
</body>
</html>
